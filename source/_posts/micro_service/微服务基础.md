---
title: 微服务基础
date: 2017-11-02 17:51:10
categories: [微服务]
---

<!-- TOC -->

- [1. 基础概念](#1-基础概念)

<!-- /TOC -->

<a id="markdown-1-基础概念" name="1-基础概念"></a>
# 1. 基础概念

系统架构设计描述了在应用系统内部,如何根据`业务,技术,组织,灵活性,可扩展性以及可维护性`等多种因素,将应用系统划分成不同的部分,并使这些部分彼此之间相互分工,相互协作,从而为用户提供某种特定价值的方式

随着`面向对象分析,设计模式,企业架构模式`等方法论的深入人心,从功能实现,代码组织的角度考虑,系统中不同职责的部分逐渐被划分到了如下三个层次:

* 表示层,聚焦数据显示和用户交互
* 业务逻辑层,聚焦业务逻辑处理
* 数据访问层,聚焦数据的存储与访问

虽然三层架构将系统在逻辑上分成三层,但它并不是物理上的分层,所有的代码最终还是运行在`同一个进程`中,对于这种`功能集中`,`代码中心化`,一个发布包,部署后运行在同一个进程,我们通常称之为`单块架构应用`

随着业务的不断扩大,需求功能的持续增加,单块架构已经很难满足业务快速变化的需要,因为:


* 维护成本增加  
 团队越来越大,相应的沟通成本,管理成本,人员协调成本必然会显著增加,譬如,使用java编写的中型应用而言,当代码量为`几万行`时,可能只需要`几人`左右的团队维护,当代码量上升到`几十万行`级别时,可能需要`几十人甚至是上百人`的团队.随着代码量的增加,在开发人员对全局功能缺乏深度理解的情况下,修复一个缺陷,还有可能引入其他缺陷
* 持续交付周期长  
 代码越来越复杂,构建和部署时间也会相应增加.
* 新人培养周期长  
 随着应用程序的功能越来越多,代码变得越来越复杂,对于新加入团队的成员而言,了解行业背景,熟悉应用程序业务,配置本地开发环境这些看似简单的任务,将会话费越来越长的时间
* 技术选型成本高  
 传统的单块架构系统倾向采用统一的技术平台或方案来解决问题,每个团队成员都必须使用相同的开发语言,持久化存储及消息系统,而且要使用类似的工具.随着应用程序的复杂性逐渐增加以及功能越来越多,如果团队希望尝试引入新的框架,技术,或者对现有技术栈升级,通常会面临不小的问题
* 可扩展性差  
 如果扩展要求紧急,`垂直扩展(Vertical Scaling或Scale-up)`可能是最容易的,如果舍得砸钱上IBM的服务器,Oracle的数据库或者来自EMC的存储设备,不用改变一行代码,整个世界都会变好的.
 与此相对,`水平扩展(Horizontal Scaling或Scale-out)`通常的做法是建立一个集群,通过在集群中不断添加新节点,然后借助前段的负载均衡器,将用户的请求按照某种算法,譬如`轮转法,散列法或者最小连接法`等合理地将请求分配到不同的节点上.对于单块架构而言,由于所有程序代码都运行在服务器上的同一个进程中,会导致应用程序的水平扩展成本非常高.
* 构建全功能团队难  
 随着应用程序的功能越来越多,代码变的越来越复杂,其应用程序的复杂结构也会逐渐地映射到研发团队的结构上.

互联网产品的特点:
* 创新成本低
* 需求变化快
* 用户群体庞大

随着市场变化加快,用户需求变化加快,用户访问量增加,单块架构应用的维护成本,人员培养成本,缺陷修复成本
 