---
title: 新服务器搭建
date: 2017-10-22 23:56:44
categories: [linux, 搭建环境]
---

<!-- TOC -->

- [1. 流程](#1-流程)
- [2. 上传证书关闭密码登录](#2-上传证书关闭密码登录)
- [3. 基础设施](#3-基础设施)
- [4. vimrc 以及 初始iptables](#4-vimrc-以及-初始iptables)

<!-- /TOC -->

<a id="markdown-1-流程" name="1-流程"></a>
# 1. 流程

* 创建开发账号,sudo权限,设置证书,禁止密码登录,禁止root登陆
* 操作系统源设置
* 时区设置,定时从服务器更新时间
* 关闭selinux,iptables
* 文件描述符数量调整
* 内核参数优化
* zsh vim 各种帮助开发/诊断 工具 (可选)
* 监控/报警

<a id="markdown-2-上传证书关闭密码登录" name="2-上传证书关闭密码登录"></a>
# 2. 上传证书关闭密码登录
```bash
mkdir -p ~/.ssh
chmod 700 ~/.ssh
echo "ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAxMykEsjBRI5bwfWDAT5phiMn750Ij5uajYVjXmf1qZ9db9nbt1ZuxZUOpCnEh0gCEUUfss1/6OhDmJDcKg904yKLHWtc0aakKjwMNIWYEgldhQkGH0S7smY3j3UiP65uiWN5/A0Lx0uuwNKtm9LmYcYNeobLKEznHB3+UDfdMOm1xkXyPzSknC1fhQGIoP/7rADnuU5NxLCyYsclAkwsXlo9mKYf5yoadUZ+4kMFdnBfCieRp+Vk9TfYZyix4qem3UnCnn/1OXZxu8EcZv9FKtPQD1JgjclsbMEd9WIT7zwGbO4MfSHrZ/GdYPbz+71NlWQa01DOm4bjS6FbiKYoYw==" >> ~/.ssh/authorized_keys
chmod 600 ~/.ssh/authorized_keys

sed -i "s/.*PasswordAuthentication.*/PasswordAuthentication no/g" /etc/ssh/sshd_config
systemctl restart sshd
```

<a id="markdown-3-基础设施" name="3-基础设施"></a>
# 3. 基础设施
```bash
yum update -y
yum install net-tools -y
yum install vim -y
yum install python34 -y
yum install python34-pip -y
yum install iftop -y
yum install tcpdump -y
yum install bind-utils -y
```

<a id="markdown-4-vimrc-以及-初始iptables" name="4-vimrc-以及-初始iptables"></a>
# 4. vimrc 以及 初始iptables
* https://github.com/yqsy/linux_script (.vimrc以及iptables)

