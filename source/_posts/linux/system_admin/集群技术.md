---
title: 集群技术
date: 2017-10-29 20:05:21
categories: [linux, 系统管理]
---


<!-- TOC -->

- [1. 集群的定义](#1-集群的定义)
- [2. 高可用集群软件](#2-高可用集群软件)
    - [2.1. Linux-HA(High_Avalialility Linux)](#21-linux-hahigh_avalialility-linux)
- [3. 负载均衡集群](#3-负载均衡集群)
    - [3.1. LVS(Linux Virtual Server)](#31-lvslinux-virtual-server)
- [4. 科学计算集群](#4-科学计算集群)

<!-- /TOC -->


<a id="markdown-1-集群的定义" name="1-集群的定义"></a>
# 1. 集群的定义

集群就是一组协同工作的服务集合,用来提供比单一服务更稳定,更高效,更具扩展性的服务平台.


* 高可用性  
 对于一些实时性很强的应用系统,必须保证服务的24小时不断运行,而由于软件,硬件,网络和人为等各种原因,单一的服务运行环境很难达到这种要求,此时构建一个集群系统是个不错的选择.构建集群的一个最大优点是集群具有高可用性,在服务出现故障时,集群系统可以自动将服务从故障节点切换到另一个备用节点

* 可扩展性  
 随着业务量的增大,现有的集群服务实体不能满足需求时,可以向此集群中动态加入一个或多个服务节点,从而满足应用的需要,增强集群的整体性能,这就是集群的可扩展性

* 负载均衡  
 集群系统最大的特点是可以灵活,有效地分担系统负载,通过集群自身定义的负载分担策略,将客户端的访问分配到下面的各个服务节点.例如,可以定义轮训分配策略,将请求平均分配到各个服务节点,还可以定义最小负载分配策略,当一个请求进来时,集群系统判断哪个服务节点比较清闲,就将此请求分发到这个节点


* 错误恢复  
 当一个任务在一个节点伤害没有完成时,由于某种原因,执行失败,此时,另一个服务节点应该能接着完成此任务,这就是集群提供的错误恢复功能,通过错误的重定向,保证了每个执行任务都能有效完成

* 心跳检测  
 为了能实现负载均衡,提供高可用服务和执行错误恢复,集群系统提供了心跳检测技术,心跳检测是通过心跳线实现的,可以做心跳线设备有RS 232串口线,也可以用独立的一块网卡来跑心跳,还可以是共享磁盘阵列等

 * 漂移IP地址  
 在集群系统中,除了每个服务节点自身的真实IP地址外,还存在一个漂移IP地址,为什么说是漂移IP呢,因为这个IP地址并不固定,例如在两个节点的双机热备中,正常状态下,这个漂移IP位于主节点上,当主节点出现故障后,漂移IP地址自动切换到备用节点上,因此,为了保证服务的不间断性,在集群系统中,对外提供的服务IP一定要是这个漂移IP地址,虽然节点本身的IP也能对外提供服务,但是当此节点失效后,服务切换到了另一个节点,服务IP仍然是故障节点的IP地址,此时,服务就随着中断了

<a id="markdown-2-高可用集群软件" name="2-高可用集群软件"></a>
# 2. 高可用集群软件

常见的HA Cluster

* 双机热备(active/standby)
 备机安装和主服务器一样的应用程序,但是并不启动服务,处于待机状态.当备机监控到主机的某个资源出现故障时,根据预先设定好的策略,首先将IP切换过来,然后将应用程序服务也接管过来,接着就由备机对外提供服务

* 双机互备
 在热备的基础上,两个相互独立的应用在两个机器上同时运行,互为主备,即两台服务器即是主机也是备机.例子:两个应用如果用双机热备技术需要4台机器,如果用双机互备则只需要2台机器,缺点是某个节点故障时,另一个节点就同时运行了两个应用的服务,有可能出现负载过大的情况

* 多机互备
 双机热备的升级,例如:某个集群由8台服务器组成,3台运行Web应用,3台运行mail应用,因而,可以将剩余的一台作为3台Web服务器的备机,另一台作为mail服务器的备机,通过这样的部署,合理充分地利用了服务器资源,同时也保证了系统的高可用性


在Linux下常用的高可用软件有: 
* Heartbeat HA
* RedHat RHCS

商业
* ROSE
* keepalived


<a id="markdown-21-linux-hahigh_avalialility-linux" name="21-linux-hahigh_avalialility-linux"></a>
## 2.1. Linux-HA(High_Avalialility Linux)


<a id="markdown-3-负载均衡集群" name="3-负载均衡集群"></a>
# 3. 负载均衡集群

英文全称呼`Load Balance Cluster`,简称LB Cluster,与HA Cluster不同的是,在负载均衡集群中,所有的后端节点都处于活动状态,它们都对外提供服务,分摊系统的工作负载

Linux下典型的负载均衡软件有开源`LVS集群`,Oracle的`RAC集群`等,硬件负载均衡器有`F5 Networks`等

<a id="markdown-31-lvslinux-virtual-server" name="31-lvslinux-virtual-server"></a>
## 3.1. LVS(Linux Virtual Server)

<a id="markdown-4-科学计算集群" name="4-科学计算集群"></a>
# 4. 科学计算集群
高性能计算(High Perfermance Computing),简称HPC集群,这类集群致力于提供单个计算机所不能提供的强大的计算能力,包括数值计算和数据处理,并且倾向于追求综合性能

