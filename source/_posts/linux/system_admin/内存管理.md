---
title: 内存管理
date: 2017-10-23 14:26:38
categories: [linux, 系统管理]
---

<!-- TOC -->

- [1. buffer和cache的区别](#1-buffer和cache的区别)
    - [1.1. 验证](#11-验证)
- [2. swap交换空间](#2-swap交换空间)
- [3. 其他指令](#3-其他指令)

<!-- /TOC -->

<a id="markdown-1-buffer和cache的区别" name="1-buffer和cache的区别"></a>
# 1. buffer和cache的区别
* buffer是用来缓冲块设备的,只记录文件系统的元数据(metadata)以及tracjing inflight pages (目录里有什么内容,文件属性及权限)
* cache是用来给文件做缓冲的(打开过的文件和程序)


<a id="markdown-11-验证" name="11-验证"></a>
## 1.1. 验证
```bash
# free -h 查看内存前后变化
find /* -name *.conf

# 清空
sync; echo 1 > /proc/sys/vm/drop_caches
```

refer:
* https://www.tecmint.com/clear-ram-memory-cache-buffer-and-swap-space-on-linux/

<a id="markdown-2-swap交换空间" name="2-swap交换空间"></a>
# 2. swap交换空间
```bash
mkdir /data
dd if=/dev/zero of=/data/swapfile bs=1M count=512

# 建立交换空间
mkswap /data/swapfile

# 激活swap
chmod 600 /data/swapfile
swapon /data/swapfile

# 查看swap
swapon -s

# 查看UUID
blkid /data/swapfile

# 在/etc/fstab中添加自动加载的设置(对于文件来说千万不要使用UUID),linux启动时会执行swapon -a,加载交换空间
/data/swapfile swap swap defaults 0 0

# 手动加载交换空间
swapon -a

# 移除交换空间
swapoff /data/swapfile
```

<a id="markdown-3-其他指令" name="3-其他指令"></a>
# 3. 其他指令
```bash
# 内存
cat /proc/meminfo

# 查看内存使用情况
free -h
```

