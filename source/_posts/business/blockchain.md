---
title: blockchain
date: 2018-07-09 15:45:03
categories: [business]
---


<!-- TOC -->

- [1. 资源](#1-资源)
- [2. 梳理](#2-梳理)
- [3. 比特币私钥,公钥,钱包维度梳理](#3-比特币私钥公钥钱包维度梳理)
- [4. 转账记录的存储与维护](#4-转账记录的存储与维护)
- [5. 区块链细节](#5-区块链细节)

<!-- /TOC -->

<a id="markdown-1-资源" name="1-资源"></a>
# 1. 资源

* https://www.zhihu.com/question/27687960/answer/148814714
* https://github.com/chaozh/awesome-blockchain-cn
* https://www.youtube.com/watch?v=chQttZ4PH24 (非常好的说明)

<a id="markdown-2-梳理" name="2-梳理"></a>
# 2. 梳理

本质是什么?
> 去中心化,去信用中介. 解决信任问题,降低信任成本的技术方案.

区块链为什么叫区块链?
> 每一个交易当成一个`区块(block)`,会盖上时间戳.每个新产生的区块严格按照`时间线`顺序推进,形成`不可逆的链条`,所以叫做`区块链(Blockchain)`

数据维度的解释?
> 区块链是一种`分布式数据库`,是一串使用`密码学方法相关联`的数据库,每个数据块都包含了一次网络交易信息

比特币和区块链啥关系?
> 比特币是第一个采用区块链技术打造出的`P2P电子货币系统应用`,是将跨领域过去数十年所累积的技术基础组合

每笔交易使用什么算法?
> 采用`椭圆曲线数位签章演算法`(Elliptic Curve Digital Signature Algorithm, ECDSA)
.相较于`RSA`算法,采用ECC好处在于可以用较短的秘钥,达到相同的安全程度..


认证机制相关知识?
> 目前区块链可分为`非实名制`和`实名制两种`,前者如比特币区块链,后者如台大地的Gcoin区块链.结合`认许制(Permissioned)`,配合金融机构的`反洗钱(AML)`与`身份验证(KYC)`规范

演进阶段?
* Blockchain 1.0 -> 数位货币(Currency)  
* Blockchain 2.0 -> 智慧资产（Smart Assets）、智慧契约（Smart Contracts）等货币以外的应用
* Blockchain 3.0 -> 更复杂的智慧契约，将区块链用于政府、医疗、科学、文化与艺术等领域。

好处?
* 没有中央账本,无法摧毁
* 每个结点都有一模一样的账本,无法作弊
* 降低成本,提高效率
* 解决中介信用问题,没有任何中介机构参与的情况下,完成双方可以互相转账


区块链可以看成什么?
> 例如比特币可以看成区块链的第一个应用,而区块链更类似于`TCP/IP`这样的底层技术,以后会扩展到越来越多的行业内.

金融领域为什么使用区块链?
> 传统金融行业为了防止单点故障和系统性风险,需要层层审计来控制金融风险,但由此也造成`高昂的内部成本`,西班牙银行统计,如果`全世界的银行`内部使用`区块链`技术的话,`大概每年能省下200亿美元的成本.`

比特币的运转状况?
> 在完全没有中心化运营机构的情况下,完美的运行了七年,不仅能够实时`结算和清算`,而且没有出现过任何一笔账目错误.

比特币的挖矿是指?
> 比特币运算采用一种成为`工作量证明`的机制,系统每次都会出一道数学题,只有最快解出这道题目的计算机才能进行记账,而抢到记账劝的计算机会获得25个比特币的奖励.如今`权益证明`,`股份授权证明`都是不需要采取这样的挖矿方式

比特币的缺点:
* 价格呈现高波动性,风险大
* 交易费用高
* 区块容量限制为1MB,交易量加大,处理速度受到影响
* 确认时间变长,无法处理超过每秒7次交易
* 隐蔽性强,贩毒,军火交易,支付绑架赎金,外汇转移等方面被广泛使用.大部分国家的监管层比较难接受比特币的广泛应用

价值和潜力:
* 在金融交易领域,区块链技术可将结算审核实践从`小时级`降至`秒级`,降低成本
* 在审计方面,公司不需要招聘专门审计人员来公司内部审核账本,`外部机构`通过跟踪这些区块链可以实时监控公司账本
* 物联网,区块链技术在这些设备之间建立了低成本的互相直接沟通桥梁

<a id="markdown-3-比特币私钥公钥钱包维度梳理" name="3-比特币私钥公钥钱包维度梳理"></a>
# 3. 比特币私钥,公钥,钱包维度梳理

* https://blog.csdn.net/jeason29/article/details/51576659 (有图,还可以)


对问题进行以下维度的整理,作为从未知到已知的切入点吧:
* 公钥 私钥 钱包地址?
* 交易过程?

![](http://ouxarji35.bkt.clouddn.com/1-14112FU345.png)


1. 生成256bits的随机数作为`私钥`
2. 经过SECP256K1椭圆曲线算法生成`公钥`
3. 通过RIPEMD160 HASHj计算得到`公钥hash`
4. 版本号放到`公钥hash`头部,对其进行`两次SHA256`运算将结果的前4字节作为校验值连接在尾部
5. 将上一步结果使用BASE58进行编码,就得到了`钱包地址`


公钥 私钥 钱包地址相互的关系?

![](http://ouxarji35.bkt.clouddn.com/1-14112FU348.png)


交易过程?

使用 `私钥` 对交易进行签名

![](http://ouxarji35.bkt.clouddn.com/1-14112FU350.png)

1. 交易原始数据包括`转账数额`和`转入钱包地址`,用私钥对原始数据进行签名
2. 生成转出钱包`公钥`?不是本来就有公钥了吗?
3. 将`公钥`和`签名`添加到原始交易数据中,生成了正式的交易数据,这样就可以广播到比特币网络进行转账了

`我的问题? 怎么知道钱包地址有钱?`


使用 `公钥`  对签名进行认证

![](http://ouxarji35.bkt.clouddn.com/1-14112FU342.png)

<a id="markdown-4-转账记录的存储与维护" name="4-转账记录的存储与维护"></a>
# 4. 转账记录的存储与维护

* https://zhuanlan.zhihu.com/p/23243289 (具体细节)
* https://www.youtube.com/watch?v=obRzfcvMshM (这个youtute挺好的)


让所有运行比特币客户端的计算机存储`所有的`比特币的转账记录?

3个一致性问题:
* 如何进行同步? 客户端离线,未联网,关机.
* 如何防止记录被篡改? 篡改计算机上的某一条或多条比特币记录.
* 如何防止重复支付? 一笔比特币收入被重复使用

利用区块链解决这个问题,比特币只认可一个`最长`的链,比特币网络上每个节点都存储着`完全相`同的一块区块链

当新的`交易记录`被放到`新的区`块而且被添加到`区块链上后`,这个新的交易记录才算得到比特币网络的确认

`新区块`由比特币网络上的称作`矿工`的`节点`生成, 矿工接收到发送到网络上的各个比特币交易记录,逐个检查这些`交易记录`是否`符合要求`. 将符合要求的比特币交易记录添加到自己正在制作的新区块中,当矿工制作成新区块后就立即把新区块发送给网络上的各个节点.新区块被发送到网络上的各个节点,并添加到自己的区块链的末尾


问题: 网络上有许许多多矿工,每个矿工产生的新区快交易记录大致相同,怎么办?

每个区块的交易记录其实各不相同,而比特币网络仅仅认可和维护同一条区块链,每个节点都`必须`选择`同一个新区块` `添加`到现有
`区块链的末尾`

但是怎么让节点达成共识,选择同一个新区块呢?

比特币的`巧妙`的方法:  

每隔10分钟的时间,整个比特币网络`只有一个矿工`能将自己做好的一个新区块发布到网络上,这样节点就不需要选择,所有的节点都将这唯一的区块添加到自己的区块链末尾

这个时间每隔10分钟的限制怎么做到的呢?

当矿工把比特币交易记录添加到自己自己的新区块后还要求矿工做一个额外的工作

额外的工作?分成两个步骤
1. 将新制作的区块所包含的内容(前一个区块的SHA-256函数值+这个新区块的基本信息+这个新区块所包含的所有交易记录)`组成一个字符串`
2. `找一个随机数`,在这个字符串的末尾添加上这个`随机数`,组成`新字符串`.`SHA-256(新字符串)`=`一个256位的二进制数`,如果这个256位的二进制数的前72位全是0,才算完成这个额外的工作(难度非常高,高到整个比特币网络一般只有一个矿工能在10分钟左右成功地找到这个随机数) (前72位数都为0的概率为(1/2)^72,也就是平均进行2^72次SHA-256函数计算,才可以找到符合要求的随机数)

找到这个随机数后马上广播,其他节点通过计算得到SHA-256字符串后确实满足要求则说明这个区块的矿工确实完成了这个额外的操作 -> 添加到自己区块链的末尾

挖矿设备
* 普通计算机,每秒能进行大约`60万次`SHA-256函数运算
* 专业显卡,每秒能进行大约`几亿次`
* 高档的挖矿机,每秒能进行大约`十万亿次`

对矿工的激励:
* 比特币网络奖励: 12.5个比特币
* 交易费收入: 区块中所有的交易的交易费,平均约2比特币

算力提升了,整个网络的计算能力提高,比特币为了维持平均10分钟生成一个区块的速度,每两个星期调整一次工作的难度



<a id="markdown-5-区块链细节" name="5-区块链细节"></a>
# 5. 区块链细节

![](http://ouxarji35.bkt.clouddn.com/v2-6ce36ec885e86ea252d343dddd961a35_hd.jpg)

* 区块高度: 每个区块的唯一ID,一段时间生成一个块,`块高度增加一`
* 头哈希: 每个区块都有一个唯一的哈希值,根据`上一个区块`的`头哈希`+`数据块哈希`+`随机数`生成
* 父哈希: `上一个高度区块`的哈希`?`
* merkle根: 区块中每`一笔交易`对应`一个哈希`,`呈树桩结构`,生成最终值,代表了该区块中的交易
* 难度: 难度不是固定不变的,会随着网络算力的变化而自我调节
* Nonce: 挖矿所要达到的目标值
* 区块体: 一定时间内所产生的交易信息,即`账本`


