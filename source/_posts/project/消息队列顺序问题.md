---
title: 消息队列顺序问题
date: 2017-11-28 20:50:00
categories: [工程问题]
---

<!-- TOC -->

- [1. 遇到的问题](#1-遇到的问题)
- [2. 相关资料](#2-相关资料)

<!-- /TOC -->


<a id="markdown-1-遇到的问题" name="1-遇到的问题"></a>
# 1. 遇到的问题
交易系统中,一直听说到一些工程问题.例如:
* 撤单回报比成交回报先到了(明明单子已经撤掉了,还给我成交回报)
* (代码里看到)撤单回报回来了,发现单子的状态是Pending new,补发new
* (代码里看到)成交回报回来了,发现单子的状态是pending cancl,补发撤单拒绝

其实这种问题根本不需要应用层去用一些很魔幻的手段调整消息的顺序,或者补发一些消息,而是需要一个可靠的消息队列,实现
* 消息的顺序
* 消息的可靠补发(例如单点关闭了,启动或换机器之后能补发)

(当然只是一个猜想,需要给我一个具体的场景实践)

<a id="markdown-2-相关资料" name="2-相关资料"></a>
# 2. 相关资料

* https://www.zhihu.com/question/27707687
* http://dbaplus.cn/news-21-1123-1.html
